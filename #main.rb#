0;95;0crequire 'sinatra'
require 'json'

# Main payload for the time being
post '/payload' do

  # Parse the json
  json = JSON.parse( request.body.read )
  # Query for the URL of the repo that sent the webhook
  repo_url =  json["repository"]["html_url"]
  # Query for the username/repo_name that sent the webhook
  full_name = json["repository"]["full_name"]
  # Initialize a new subdirectory with the scraped username 
  system "git clone #{repo_url} subdir-#{full_name}"
  
end
